<%= govuk_back_link href: npq_separation_admin_cohort_schedule_path(@cohort, @schedule) %>

<h1 class="govuk-heading-l">Change statement date</h1>

<%=
  govuk_summary_list do |sl|
    sl.with_row do |row|
      row.with_key(text: "Milestone declaration type")
      row.with_value(text: @milestone.declaration_type)
    end
    sl.with_row do |row|
      row.with_key(text: "Current statement date")
      row.with_value(text: @milestone.statement_date&.to_fs(:govuk_approx) || "-")
    end
  end
%>

<%= form_for @service,
  url: npq_separation_admin_cohort_schedule_milestone_path(@cohort, @schedule, @milestone),
  method: :put do |f| %>
  <%= f.govuk_error_summary %>

  <%= f.govuk_collection_select(
    :statement_date,
    @statement_date_options,
    :year_month,
    :label,
    options: { include_blank: "- select date -" },
    label: { text: "Select statement date to associate with milestone", size: "m" },
    hint: { text: "Statements for all providers with the selected date will be associated with this milestone." }
  ) %>

  <div class="govuk-button-group">
    <%= f.govuk_submit %>
    <%= govuk_link_to("Cancel", npq_separation_admin_cohort_schedule_path(@cohort, @schedule), class: "govuk-link--no-visited-state") %>
  </div>
<% end %>
